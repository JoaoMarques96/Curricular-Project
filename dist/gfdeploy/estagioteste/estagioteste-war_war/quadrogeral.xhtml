<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <h:head>

        <meta http-equiv="refresh" content="150000"/>
        <title>TODO supply a title</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" crossorigin="anonymous" />
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous"></link>
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" crossorigin="anonymous"></script>
        <link href="dashboard.css" rel="stylesheet"/>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <script type="text/javascript">

            google.charts.load('current', {'packages': ['gauge']});
            google.charts.setOnLoadCallback(drawChart);
            google.charts.load('current', {'packages': ['gauge']});
            google.charts.setOnLoadCallback(drawChart2);
            google.charts.load('current', {'packages': ['gauge']});
            google.charts.setOnLoadCallback(drawChartF1);
            google.charts.load('current', {'packages': ['gauge']});
            google.charts.setOnLoadCallback(drawChartF2);
            google.charts.load('current', {'packages': ['gauge']});
            google.charts.setOnLoadCallback(drawChartF3);
            google.charts.load('current', {'packages': ['gauge']});
            google.charts.setOnLoadCallback(drawChartF1C);
            google.charts.load('current', {'packages': ['gauge']});
            google.charts.setOnLoadCallback(drawChartF2C);
            google.charts.load('current', {'packages': ['gauge']});
            google.charts.setOnLoadCallback(drawChartF3C);
           
            
        
       

 //  setInterval(function () {
    //          valor4 = #{valoresgrafico.randomcorrente()};
//            valor5 = #{valoresgrafico.randomcorrente()};
//            valor6 = #{valoresgrafico.randomcorrente()};
//                media2 = Math.round((((valor4 + valor5 + valor6) / 3)));
//            }, 2000);
//            
            
            window.setInterval("refreshDiv()",5000);
            function refreshDiv(){
//                $('#chart_refresh').load('/WEB-INF/graficos.xhtml');
       //     document.getElementById("chart_refresh").innerHTML = location.reload();
            }



            function drawChart(graph1) {
                
                valor1 = #{valoresgrafico.randomtensao()};
            valor2 = #{valoresgrafico.randomtensao()};
            valor3 = #{valoresgrafico.randomtensao()};
            medianova = Math.round((((valor1 + valor2 + valor3) / 3)));

                var data = google.visualization.arrayToDataTable([
                    ['Label', 'Value'],
                    ['Tensão', medianova]

                ]);

                var options = {

                    redFrom: 210, redTo: 225, redColor: "ff4d00",
                    yellowFrom: 235, yellowTo: 250, yellowColor: "ff4d00",
                    greenFrom: 225, greenTo: 235,
                    minorTicks: 5,
                    min: 210,
                    max: 250
                };

                var chart = new google.visualization.Gauge(document.getElementById('chart_div'));

                chart.draw(data, options);

                //setInterval(function () {
               //     data.setValue(230);
              //      chart.draw(data, options);
               // }, 2000);

            }
            
            setInterval(drawChart, 2000);
            function drawChart2() {
                
                     valor4 = #{valoresgrafico.randomcorrente()};
            valor5 = #{valoresgrafico.randomcorrente()};
            valor6 = #{valoresgrafico.randomcorrente()};
            media2 = Math.round((((valor4 + valor5 + valor6) / 3)));

                var data = google.visualization.arrayToDataTable([
                    ['Label', 'Value'],
                    ['Corrente', media2]

                ]);

                var options = {
                    greenFrom: 0, greenTo: 100,
                    redFrom: 100, redTo: 130,
                    minorTicks: 5,
                    min: 0,
                    max: 130
                };

                var chart = new google.visualization.Gauge(document.getElementById('chart2_div'));

                chart.draw(data, options);

                setInterval(function () {
                    data.setValue(130);
                    chart.draw(data, options);
                }, 13000);

            }
            setInterval(drawChart2, 2000);
            google.charts.load('current', {packages: ['corechart', 'line']});
            google.charts.setOnLoadCallback(drawLineColors);
            google.charts.load('current', {packages: ['corechart', 'line']});
            google.charts.setOnLoadCallback(drawLineColors2);
            


            function drawLineColors() {
                var data = new google.visualization.DataTable();
                data.addColumn('number', 'X');
                data.addColumn('number', 'Fase 1');
                data.addColumn('number', 'Fase 2');
                data.addColumn('number', 'Fase 3');

                data.addRows([
                    [0, 0, 0, 0], [10, 10, 5, 4], [15, 23, 15, 15], [20, 17, 9, 18], [30, 18, 10, 15], [35, 9, 5, 10],
                ]);

                var options = {
                    legend: {
                        position: 'top'
                    },
                    hAxis: {
                        title: 'Tempo'
                    },
                    vAxis: {
                        title: 'Tensão'
                    },
                    colors: ['#a52714', '#097138', '#0000bf']
                };

                var chart = new google.visualization.LineChart(document.getElementById('chart_div_line'));
                chart.draw(data, options);
            }

            function drawLineColors2() {
                var data = new google.visualization.DataTable();
                data.addColumn('number', 'X');
                data.addColumn('number', 'Fase 1');
                data.addColumn('number', 'Fase 2');
                data.addColumn('number', 'Fase 3');

                data.addRows([
                    [0, 0, 0, 0], [10, 10, 5, 4], [15, 23, 15, 15], [20, 17, 9, 18], [30, 18, 10, 15], [35, 9, 5, 10],
                ]);

                var options = {
                    legend: {
                        position: 'top'
                    },
                    hAxis: {
                        title: 'Tempo'
                    },
                    vAxis: {
                        title: 'Corrente'
                    },
                    colors: ['#a52714', '#097138', '#0000bf']
                };

                var chart = new google.visualization.LineChart(document.getElementById('chart_div_line2'));
                chart.draw(data, options);
            }

            function drawChartF1() {

                var data = google.visualization.arrayToDataTable([
                    ['Label', 'Value'],
                    ['Fase 1', valor1]

                ]);

                var options = {

                    redFrom: 210, redTo: 225, redColor: "ff4d00",
                    yellowFrom: 235, yellowTo: 250, yellowColor: "ff4d00",
                    greenFrom: 225, greenTo: 235,
                    minorTicks: 5,
                    min: 210,
                    max: 250
                };


                var chart = new google.visualization.Gauge(document.getElementById('chart_div_F1'));

                chart.draw(data, options);

                setInterval(function () {
                    data.setValue(230);
                    chart.draw(data, options);
                }, 13000);

            }
            setInterval(drawChartF1, 2000);
            function drawChartF2() {

                var data = google.visualization.arrayToDataTable([
                    ['Label', 'Value'],
                    ['Fase 2', valor2]

                ]);


                var options = {

                    redFrom: 210, redTo: 225, redColor: "ff4d00",
                    yellowFrom: 235, yellowTo: 250, yellowColor: "ff4d00",
                    greenFrom: 225, greenTo: 235,
                    minorTicks: 5,
                    min: 210,
                    max: 250
                };

                var chart = new google.visualization.Gauge(document.getElementById('chart_div_F2'));

                chart.draw(data, options);

                setInterval(function () {
                    data.setValue(230);
                    chart.draw(data, options);
                }, 13000);

            }
            setInterval(drawChartF2, 2000);
            function drawChartF3() {

                var data = google.visualization.arrayToDataTable([
                    ['Label', 'Value'],
                    ['Fase 3', valor3]

                ]);

                var options = {

                    redFrom: 210, redTo: 225, redColor: "ff4d00",
                    yellowFrom: 235, yellowTo: 250, yellowColor: "ff4d00",
                    greenFrom: 225, greenTo: 235,
                    minorTicks: 5,
                    min: 210,
                    max: 250
                };

                var chart = new google.visualization.Gauge(document.getElementById('chart_div_F3'));

                chart.draw(data, options);

                setInterval(function () {
                    data.setValue(230);
                    chart.draw(data, options);
                }, 13000);

            }
            setInterval(drawChartF3, 2000);
            function drawChartF1C() {

                var data = google.visualization.arrayToDataTable([
                    ['Label', 'Value'],
                    ['Corrente', valor4]

                ]);

                var options = {
                    greenFrom: 0, greenTo: 100,
                    redFrom: 100, redTo: 130,
                    minorTicks: 5,
                    min: 0,
                    max: 130
                };

                var chart = new google.visualization.Gauge(document.getElementById('chart2_F1_C'));

                chart.draw(data, options);

                setInterval(function () {
                    data.setValue(230);
                    chart.draw(data, options);
                }, 13000);

            }
            setInterval(drawChartF1C, 2000);
            function drawChartF2C() {

                var data = google.visualization.arrayToDataTable([
                    ['Label', 'Value'],
                    ['Corrente', valor5]

                ]);

                var options = {
                    greenFrom: 0, greenTo: 100,
                    redFrom: 100, redTo: 130,
                    minorTicks: 5,
                    min: 0,
                    max: 130
                };

                var chart = new google.visualization.Gauge(document.getElementById('chart2_F2_C'));

                chart.draw(data, options);

                setInterval(function () {
                    data.setValue(130);
                    chart.draw(data, options);
                }, 13000);

            }
            setInterval(drawChartF2C, 2000);
            function drawChartF3C() {

                var data = google.visualization.arrayToDataTable([
                    ['Label', 'Value'],
                    ['Corrente', valor6]

                ]);

                var options = {
                    greenFrom: 0, greenTo: 100,
                    redFrom: 100, redTo: 130,
                    minorTicks: 5,
                    min: 0,
                    max: 130
                };

                var chart = new google.visualization.Gauge(document.getElementById('chart2_F3_C'));

                chart.draw(data, options);

                setInterval(function () {
                    data.setValue(130);
                    chart.draw(data, options);
                }, 13000);

            }


            setInterval(drawChartF3C, 2000);

        </script>
    </h:head>
   

    <body>
       
        <nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow">
            <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">  Semitrónica </a>
        </nav>

        <div class="container-fluid">
            <div class="row">
                <ui:include src="/WEB-INF/menu.xhtml"/>

                <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
                    <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                        <h1 class="h2">Valor Instantâneo </h1>
                        
                    </div>

                    <div class="row" id="chart_refresh">

                        <div class="col-sm-4">
                              
                             
                            <div class="row">
                                <div class="col-sm-6"><div id ="chart_div"></div></div>
                                <div class="col-sm-6"><div id ="chart2_div"></div></div>
                            </div>
                            <br></br>
                            <br></br>
                          

                            <div class="row">
                                <div class="col-sm-12"><b><p class="text-center">Potência : 3,45</p></b></div>
                            </div>

                        </div>

                        <div class="col-sm-8">
                            <div class="row">

                                <div class="col-sm-6 "> <div id ="chart_div_line"> </div></div>
                                <div class="col-sm-6 "> <div id ="chart_div_line2"> </div></div>
                            </div>
                        </div>

                    </div>

                    <div class="col-md-12"><p>
                            <a class="btn btn-info" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">

                                <i class="fas fa-plus-circle"></i> Info          
                            </a>
                            <a class="btn btn-primary "  role="button"  href="http://localhost:8080/estagioteste-war/faces/quadrogeral.xhtml"  >
                                <i class="fas fa-sync-alt"></i> Refresh
                            </a>
                        </p>
                        <div class="collapse" id="collapseExample">
                            <div class="card card-body">
                                <div class="row">
                                    <div class="col-sm-12"><b><p class="text-center">Valores da tensão </p></b></div>
                                </div>
                                <div class="row">

                                    <div class="col-sm-4"><div id="chart_div_F1"></div></div>
                                    <div class="col-sm-4"><div id="chart_div_F2"></div></div>
                                    <div class="col-sm-4"><div id="chart_div_F3"></div></div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12"><b><p class="text-center">Valores da corrente</p></b></div>
                                </div>
                                <div class="row">

                                    <div class="col-sm-4"><div id="chart2_F1_C"></div></div>
                                    <div class="col-sm-4"><div id="chart2_F2_C"></div></div>
                                    <div class="col-sm-4"><div id="chart2_F3_C"></div></div>
                                </div> </div>
                        </div>
                        <br></br>
                        <h1 class="h2">Alertas </h1>
                        <hr></hr>
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            <strong>Danger!</strong>  Pico de tensão Fase 1 , 19:30 h
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                       <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            <strong>Danger!</strong>  Pico de corrente Fase 3 , 19:00 h
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            <strong>Danger!</strong>  Pico de tensão Fase 3 , 19:30 h
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            <strong>Danger!</strong>  Pico de tensão Fase 2 , 14:30 h
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        
                    </div>


                </main>
            </div>
        </div>

    </body>
</html>
